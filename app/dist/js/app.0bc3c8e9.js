(function(t){function e(e){for(var o,r,s=e[0],c=e[1],l=e[2],p=0,d=[];p<s.length;p++)r=s[p],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&d.push(i[r][0]),i[r]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);u&&u(e);while(d.length)d.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],o=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(o=!1)}o&&(a.splice(e--,1),t=r(r.s=n[0]))}return t}var o={},i={app:0},a=[];function r(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=o,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var o=n("8a23"),i=n.n(o);i.a},1:function(t,e){},1543:function(t,e,n){"use strict";n.r(e),n.d(e,"db",(function(){return r})),n.d(e,"auth",(function(){return s})),n.d(e,"currentUser",(function(){return c})),n.d(e,"graphsCollection",(function(){return l}));var o=n("59ca"),i=n.n(o),a=(n("e71f"),n("ea7b"),{apiKey:"AIzaSyDHMD54UNFlh6euKdSm-cXHhrxYwVzQ8XU",authDomain:"vote-recognition.firebaseapp.com",databaseURL:"https://vote-recognition.firebaseio.com",projectId:"vote-recognition",storageBucket:"vote-recognition.appspot.com",messagingSenderId:"222754152177",appId:"1:222754152177:web:6e012c383dcec081d95350",measurementId:"G-57F98JFM4J"});i.a.initializeApp(a);var r=i.a.firestore(),s=i.a.auth(),c=s.currentUser,l=r.collection("graphs")},2:function(t,e){},3:function(t,e){},"545c":function(t,e,n){"use strict";var o=n("8314"),i=n.n(o);i.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-content",[n("router-view")],1),n("snackbar"),n("informationDialog")],1)},a=[],r=(n("4160"),n("159b"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-snackbar",{attrs:{color:t.snackbar.color,timeout:t.snackbar.timeout,top:""},model:{value:t.snackbar.active,callback:function(e){t.$set(t.snackbar,"active",e)},expression:"snackbar.active"}},[t._v(" "+t._s(t.snackbar.text)+" ")])}),s=[],c=(n("a4d3"),n("4de4"),n("e439"),n("dbb4"),n("b64b"),n("ade3")),l=n("2f62");function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var d={computed:p({},Object(l["b"])(["snackbar"]))},f=d,v=n("2877"),m=n("6544"),g=n.n(m),h=n("2db4"),b=Object(v["a"])(f,r,s,!1,null,"f629ef72",null),y=b.exports;g()(b,{VSnackbar:h["a"]});var x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-center"},[n("v-dialog",{attrs:{width:"500"},model:{value:t.informationDialog,callback:function(e){t.informationDialog=e},expression:"informationDialog"}},[n("v-card",{on:{click:function(e){t.informationDialog=!1}}},[n("v-card-title",{staticClass:"headline white--text success",attrs:{"primary-title":""}},[t._v("Information")]),n("v-card-title",{staticClass:"grey--text"},[n("v-icon",{staticClass:"grey--text",attrs:{color:"black",left:""}},[t._v("mdi-hand")]),t._v("How to vote ")],1),n("v-card-text",{staticClass:"pb-5 grey--text"},[t._v("Raise one of your wrists above your shoulders")]),n("v-card-title",{staticClass:"grey--text"},[n("v-icon",{staticClass:"grey--text",attrs:{color:"black",left:""}},[t._v("mdi-content-save")]),t._v("How to save the result ")],1),n("v-card-text",{staticClass:"pb-5 grey--text"},[t._v("Raise your two elbows above your shoulders.")]),n("v-card-title",{staticClass:"grey--text"},[n("v-icon",{staticClass:"grey--text",attrs:{color:"black",left:""}},[t._v("mdi-format-list-text")]),t._v("How to see saved results ")],1),n("v-card-text",{staticClass:"pb-5 grey--text"},[t._v("Put your two wrists further to your right shoulder. To close this navigation drawer, put your two wrists further to your left shoulder.")])],1)],1)],1)},w=[],k={computed:{informationDialog:{get:function(){return this.$store.state.informationDialog},set:function(t){return this.$store.commit("setInformationDialog",t)}}}},O=k,_=n("b0af"),S=n("99d9"),D=n("169a"),j=n("132d"),C=Object(v["a"])(O,x,w,!1,null,"6ec111d8",null),P=C.exports;g()(C,{VCard:_["a"],VCardText:S["a"],VCardTitle:S["b"],VDialog:D["a"],VIcon:j["a"]});var $=n("1543"),R={name:"App",components:{Snackbar:y,InformationDialog:P},data:function(){return{}},mounted:function(){var t=this;$.auth.signInAnonymously().then((function(t){console.log(t)})).catch((function(t){console.log(t);t.code,t.message})),$.graphsCollection.orderBy("createdOn","desc").limit(10).onSnapshot((function(e){var n=[];e.forEach((function(t){n.push(Object.assign({uid:t.id},t.data()))})),t.$store.commit("setResults",n)}),(function(t){console.log(t)}))}},I=R,M=(n("034f"),n("7496")),N=n("a75b"),V=Object(v["a"])(I,i,a,!1,null,null,null),q=V.exports;g()(V,{VApp:M["a"],VContent:N["a"]});var T=n("8c4f"),z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"video-recognition"},[n("NavigationDrawer"),n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[n("v-btn",t._g({staticStyle:{position:"fixed","z-index":"2",left:"5px",top:"5px"},attrs:{fab:"",depressed:"",color:"transparent",small:"",dark:"",loading:t.loadingModel},on:{click:function(e){return t.toggle()}}},o),[n("v-icon",{staticStyle:{"text-shadow":"0px 2px 6px rgba(0, 0, 0, 0.5)"},attrs:{color:"white"}},[t._v(t._s(t.start?"mdi-stop":"mdi-play"))])],1)]}}])},[n("span",[t._v("Start")])]),n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[n("v-btn",t._g({staticStyle:{position:"fixed","z-index":"2",left:"50px",top:"5px"},attrs:{fab:"",depressed:"",color:"transparent",small:"",dark:"",loading:t.loadingSaveResult},on:{click:function(e){return t.save()}}},o),[n("v-icon",{staticStyle:{"text-shadow":"0px 2px 6px rgba(0, 0, 0, 0.5)"},attrs:{color:"white"}},[t._v("mdi-content-save")])],1)]}}])},[n("span",[t._v("Save")])]),n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[n("v-btn",t._g({staticStyle:{position:"fixed","z-index":"2",left:"100px",top:"5px"},attrs:{fab:"",depressed:"",color:"transparent",small:"",dark:""},on:{click:function(e){return t.openNavigationDrawer()}}},o),[n("v-icon",{staticStyle:{"text-shadow":"0px 2px 6px rgba(0, 0, 0, 0.5)"},attrs:{color:"white"}},[t._v("mdi-poll-box")])],1)]}}])},[n("span",[t._v("Results")])]),n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[n("v-btn",t._g({staticStyle:{position:"fixed","z-index":"2",left:"150px",top:"5px"},attrs:{fab:"",depressed:"",color:"transparent",small:"",dark:""},on:{click:function(e){return t.openInformationDialog()}}},o),[n("v-icon",{staticStyle:{"text-shadow":"0px 2px 6px rgba(0, 0, 0, 0.5)"},attrs:{color:"white"}},[t._v("mdi-information")])],1)]}}])},[n("span",[t._v("Information")])]),n("div",{staticStyle:{position:"fixed","z-index":"1",top:"8vh",width:"100%"}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.question,expression:"question"}],attrs:{placeholder:"Write your question here..."},domProps:{value:t.question,innerHTML:t._s(t.question)},on:{input:function(e){e.target.composing||(t.question=e.target.value)}}})]),n("div",{staticClass:"d-flex justify-center"},[n("video",{ref:"video",attrs:{id:"video",width:"640",height:"480",autoplay:""}})]),n("canvas",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"canvas",attrs:{id:"canvas",width:"640",height:"480"}}),n("img",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"image",staticStyle:{height:"100vh",width:"100vw"},attrs:{src:t.capture,id:"image"}}),n("Chart",{staticClass:"chart-fixed",attrs:{result:t.result}})],1)},E=[],F=(n("45fc"),n("ac1f"),n("466d"),n("96cf"),n("1da1")),A=n("8726"),U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-navigation-drawer",{staticClass:"drawer",attrs:{absolute:"",temporary:"",dark:""},model:{value:t.navigationDrawer,callback:function(e){t.navigationDrawer=e},expression:"navigationDrawer"}},[n("v-btn",{staticClass:"ma-1",staticStyle:{position:"fixed","z-index":"2",left:"5px",top:"5px"},attrs:{fab:"",depressed:"",color:"transparent",small:"",dark:""},on:{click:function(e){t.navigationDrawer=!1}}},[n("v-icon",{staticStyle:{"text-shadow":"0px 2px 6px rgba(0, 0, 0, 0.5)"},attrs:{color:"white"}},[t._v("mdi-arrow-left")])],1),t._l(t.results,(function(e,o){return n("div",{key:o},[n("div",{staticClass:"d-flex justify-center mt-4"},[n("Chart",{attrs:{result:e.result}})],1),n("div",{staticClass:"d-flex justify-center mt-3 mx-5"},[n("h2",{staticStyle:{color:"white","font-size":"30px","text-align":"center"}},[t._v(t._s(e.question))])]),n("div",{staticClass:"d-flex justify-center mt-3 mx-5"},[n("v-btn",{staticClass:"ma-1",attrs:{fab:"",depressed:"",color:"transparent",small:"",dark:""},on:{click:function(n){return t.deleteResult(e)}}},[n("v-icon",{staticStyle:{"text-shadow":"0px 2px 6px rgba(0, 0, 0, 0.5)"},attrs:{color:"red"}},[t._v("mdi-delete")])],1)],1),n("v-divider",{staticClass:"ma-5"})],1)}))],2)},B=[],H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chart-labels"},[n("div",{staticClass:"chart"},[n("div",{staticClass:"yes",style:{height:50*t.result[0]+"px"}},[t._v(" "+t._s(0!=t.result[0]?t.result[0]:" ")+" ")]),n("div",{staticClass:"no",style:{height:50*t.result[1]+"px"}},[t._v(" "+t._s(0!=t.result[1]?t.result[1]:" ")+" ")])]),t._m(0)])},L=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"labels"},[n("div",{staticClass:"yes-label"},[t._v("Yes")]),n("div",{staticClass:"no-label"},[t._v("No")])])}],J={props:["result"]},W=J,Y=(n("d457"),Object(v["a"])(W,H,L,!1,null,"70ac8659",null)),K=Y.exports;function X(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function G(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?X(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Q=n("1543"),Z={components:{Chart:K},computed:G({},Object(l["b"])(["results"]),{navigationDrawer:{get:function(){return this.$store.state.navigationDrawer},set:function(t){return this.$store.commit("setNavigationDrawer",t)}}}),methods:{deleteResult:function(t){var e=this;Q.graphsCollection.doc(t.uid).delete().then((function(){e.$store.commit("setSnackbar",{color:"success",timeout:3e3,text:"This result has been deleted"})})).catch((function(t){console.log(t)}))}}},tt=Z,et=(n("545c"),n("8336")),nt=n("ce7e"),ot=n("f774"),it=Object(v["a"])(tt,U,B,!1,null,null,null),at=it.exports;g()(it,{VBtn:et["a"],VDivider:nt["a"],VIcon:j["a"],VNavigationDrawer:ot["a"]});var rt=n("1543"),st={name:"video-recognition",components:{NavigationDrawer:at,Chart:K},data:function(){return{frequency:1e3,result:[0,0],video:{},canvas:{},capture:null,start:!1,loadingModel:!0,loadingSaveResult:!1,interval:null,question:"",modelLoaded:!1,net:null}},methods:{openInformationDialog:function(){this.$store.commit("setInformationDialog",!0)},openNavigationDrawer:function(){this.$store.commit("setNavigationDrawer",!0)},save:function(){var t=this;if(1!=this.loadingSaveResult)if(""!=this.question){this.loadingSaveResult=!0;var e=this;rt.graphsCollection.add({result:this.result,createdOn:new Date,question:this.question}).then((function(n){setTimeout((function(){e.loadingSaveResult=!1}),3e3),t.$store.commit("setSnackbar",{color:"success",timeout:3e3,text:"Result have been saved"})})).catch((function(e){t.loadingSaveResult=!1,console.log(e)}))}else this.$store.commit("setSnackbar",{color:"info",timeout:3e3,text:"Write a question before saving..."})},toggle:function(){0==this.start?(this.start=!0,this.predict()):this.start=!1},predict:function(){this.$store.commit("setSnackbar",{color:"success",timeout:3e3,text:"Now raise your hand!"}),this.estimateMultiplePosesOnImage()},takePicture:function(){this.canvas=this.$refs.canvas;this.canvas.getContext("2d").drawImage(this.video,0,0,640,480);this.capture=this.canvas.toDataURL("image/png")},estimateMultiplePosesOnImage:function(){var t=this;return Object(F["a"])(regeneratorRuntime.mark((function e(){var n,o,i,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=performance.now(),t.takePicture(),o=t.$refs.image,""==o.src){e.next=10;break}return e.next=6,t.net.estimateMultiplePoses(o,{flipHorizontal:!1,maxDetections:10,scoreThreshold:.6,nmsRadius:20});case 6:if(i=e.sent,t.start){e.next=9;break}return e.abrupt("return");case 9:t.analyzePoses(i);case 10:a=performance.now(),a-n>t.frequency?t.estimateMultiplePosesOnImage():(r=t,setTimeout((function(){r.estimateMultiplePosesOnImage()}),t.frequency-(a-n)));case 12:case"end":return e.stop()}}),e)})))()},analyzePoses:function(t){var e=0,n=0,o=0;while(t[o])t[o].score>.2&&(this.isVotingYes(t[o])?e++:n++,this.isSaving(t[o])&&this.save(),this.isTogglingNavigationDrawer(t[o])),o++;this.result=[e,n]},isVotingYes:function(t){return t.keypoints[5].position.y>t.keypoints[9].position.y||t.keypoints[6].position.y>t.keypoints[10].position.y},isSaving:function(t){if(!this.loadingSaveResult)return t.keypoints[7].position.y<t.keypoints[5].position.y&&t.keypoints[8].position.y<t.keypoints[6].position.y},isTogglingNavigationDrawer:function(t){(t.keypoints[9].position.y&&t.keypoints[10].position.y)<(t.keypoints[6].position.y&&t.keypoints[5].position.y)&&(t.keypoints[9].position.x<t.keypoints[6].position.x&&t.keypoints[10].position.x<t.keypoints[6].position.x&&this.$store.commit("setNavigationDrawer",!0),t.keypoints[9].position.x>t.keypoints[5].position.x&&t.keypoints[10].position.x>t.keypoints[5].position.x&&this.$store.commit("setNavigationDrawer",!1))},detectMob:function(){var t=[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i];return t.some((function(t){return navigator.userAgent.match(t)}))}},beforeMount:function(){var t=this;return Object(F["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$store.commit("setSnackbar",{color:"info",timeout:3e3,text:"Wait few seconds..."}),!t.detectMob()){e.next=7;break}return e.next=4,A["a"]();case 4:t.net=e.sent,e.next=10;break;case 7:return e.next=9,A["a"]({architecture:"ResNet50",outputStride:32});case 9:t.net=e.sent;case 10:t.$store.commit("setSnackbar",{color:"success",timeout:3e3,text:"Ready to run!"}),t.loadingModel=!1;case 12:case"end":return e.stop()}}),e)})))()},mounted:function(){var t=this;this.video=this.$refs.video,navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then((function(e){t.video.srcObject=e,t.video.play()}));var e=this;window.addEventListener("keyup",(function(t){13===t.keyCode&&(e.toggle(),window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty())}))}},ct=st,lt=(n("8a44"),n("3a2f")),ut=Object(v["a"])(ct,z,E,!1,null,null,null),pt=ut.exports;g()(ut,{VBtn:et["a"],VIcon:j["a"],VTooltip:lt["a"]}),o["a"].use(T["a"]);var dt=[{path:"/",name:"video",component:pt}],ft=new T["a"]({mode:"history",base:"/",routes:dt}),vt=ft;o["a"].use(l["a"]);var mt=new l["a"].Store({state:{snackbar:{active:!1,color:"",mode:"",timeout:0,text:""},navigationDrawer:!1,results:[],informationDialog:!1},mutations:{setInformationDialog:function(t,e){t.informationDialog=e},setSnackbar:function(t,e){t.snackbar=Object.assign({},e,{active:!0})},setNavigationDrawer:function(t,e){t.navigationDrawer=e},setResults:function(t,e){t.results=e}},actions:{},modules:{}}),gt=n("f309");o["a"].use(gt["a"]);var ht,bt=new gt["a"]({theme:{themes:{light:{primary:"#2196F3",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#53c0a1",warning:"#FFC107"}}}}),yt=n("1543");o["a"].config.productionTip=!1,yt.auth.onAuthStateChanged((function(t){ht||(ht=new o["a"]({el:"#app",router:vt,store:mt,vuetify:bt,render:function(t){return t(q)}}))}))},8314:function(t,e,n){},"8a23":function(t,e,n){},"8a44":function(t,e,n){"use strict";var o=n("fd34"),i=n.n(o);i.a},d457:function(t,e,n){"use strict";var o=n("ec1e"),i=n.n(o);i.a},ec1e:function(t,e,n){},fd34:function(t,e,n){}});
//# sourceMappingURL=app.0bc3c8e9.js.map