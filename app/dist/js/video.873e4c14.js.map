{"version":3,"sources":["webpack:///./src/views/Video.vue?0cc3","webpack:///src/views/Video.vue","webpack:///./src/views/Video.vue?05c2","webpack:///./src/views/Video.vue","webpack:///./src/views/Video.vue?28cd"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","attrs","_v","loading","on","$event","toggle","_s","start","directives","name","rawName","value","expression","domProps","question","target","composing","ref","style","height","result","_m","capture","staticRenderFns","data","video","canvas","interval","methods","predict","estimateMultiplePosesOnImage","takePicture","$refs","toDataURL","numberOfVotes","i","poses","score","vote_yes","vote_no","console","log","mounted","navigator","mediaDevices","getUserMedia","component","VBtn","VIcon"],"mappings":"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","file":"js/video.873e4c14.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"video-recognition\"},[_c('v-btn',{staticStyle:{\"position\":\"fixed\",\"z-index\":\"2\",\"left\":\"5px\",\"top\":\"5px\"},attrs:{\"fab\":\"\",\"depressed\":\"\",\"color\":\"transparent\",\"to\":\"/\",\"small\":\"\"}},[_c('v-icon',{staticStyle:{\"text-shadow\":\"0px 2px 6px rgba(0, 0, 0, 0.5)\"},attrs:{\"color\":\"white\"}},[_vm._v(\"mdi-arrow-left\")])],1),_c('v-btn',{staticStyle:{\"position\":\"fixed\",\"z-index\":\"2\",\"left\":\"35px\",\"top\":\"5px\"},attrs:{\"fab\":\"\",\"depressed\":\"\",\"color\":\"transparent\",\"small\":\"\",\"dark\":\"\",\"loading\":_vm.loading},on:{\"click\":function($event){return _vm.toggle()}}},[_c('v-icon',{staticStyle:{\"text-shadow\":\"0px 2px 6px rgba(0, 0, 0, 0.5)\"},attrs:{\"color\":\"white\"}},[_vm._v(_vm._s(_vm.start?'mdi-stop':'mdi-play'))])],1),_c('div',{staticStyle:{\"position\":\"fixed\",\"z-index\":\"1\",\"top\":\"4vh\",\"width\":\"100%\"}},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.question),expression:\"question\"}],attrs:{\"placeholder\":\"Write your question here...\"},domProps:{\"value\":(_vm.question),\"innerHTML\":_vm._s(_vm.question)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.question=$event.target.value}}})]),_c('div',{staticClass:\"d-flex justify-center\"},[_c('video',{ref:\"video\",attrs:{\"id\":\"video\",\"width\":\"640\",\"height\":\"480\",\"autoplay\":\"\"}})]),_c('div',{staticClass:\"chart-labels\"},[_c('div',{staticClass:\"chart\"},[_c('div',{staticClass:\"yes\",style:({height:_vm.result[0]*50+'px'})},[_vm._v(_vm._s(_vm.result[0]!=0?_vm.result[0]:\" \"))]),_c('div',{staticClass:\"no\",style:({height:_vm.result[1]*50+'px'})},[_vm._v(_vm._s(_vm.result[1]!=0?_vm.result[1]:\" \"))])]),_vm._m(0)]),_c('canvas',{directives:[{name:\"show\",rawName:\"v-show\",value:(false),expression:\"false\"}],ref:\"canvas\",attrs:{\"id\":\"canvas\",\"width\":\"640\",\"height\":\"480\"}}),_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(false),expression:\"false\"}],staticStyle:{\"height\":\"100vh\",\"width\":\"100vw\"},attrs:{\"src\":_vm.capture,\"id\":\"image\"}})],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"labels\"},[_c('div',{staticClass:\"yes-label\"},[_vm._v(\"Yes\")]),_c('div',{staticClass:\"no-label\"},[_vm._v(\"No\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"video-recognition\">\n    <v-btn\n      fab\n      depressed\n      color=\"transparent\"\n      to=\"/\"\n      small\n      style=\"position:fixed;z-index:2;left:5px;top:5px\"\n    >\n      <v-icon color=\"white\" style=\"text-shadow: 0px 2px 6px rgba(0, 0, 0, 0.5);\">mdi-arrow-left</v-icon>\n    </v-btn>\n    <v-btn\n      fab\n      depressed\n      color=\"transparent\"\n      small\n      dark\n      style=\"position:fixed;z-index:2;left:35px;top:5px\"\n      @click=\"toggle()\"\n      :loading=\"loading\"\n    >\n      <v-icon\n        color=\"white\"\n        style=\"text-shadow: 0px 2px 6px rgba(0, 0, 0, 0.5);\"\n      >{{start?'mdi-stop':'mdi-play'}}</v-icon>\n    </v-btn>\n\n    <div style=\"position:fixed;z-index:1;top:4vh;width:100%\">\n      <textarea v-model=\"question\" placeholder=\"Write your question here...\" v-html=\"question\"></textarea>\n    </div>\n\n    <div class=\"d-flex justify-center\">\n      <video ref=\"video\" id=\"video\" width=\"640\" height=\"480\" autoplay></video>\n    </div>\n    <!-- <div class=\"d-flex justify-center\" style=\"margin-top:-50px;\">\n      <v-btn depressed rounded @click=\"toggle()\" :loading=\"loading\">{{start?'Stop':'Start'}}</v-btn>\n    </div>-->\n    <div class=\"chart-labels\">\n      <div class=\"chart\">\n        <div class=\"yes\" :style=\"{height:result[0]*50+'px'}\">{{ result[0]!=0?result[0]:\" \" }}</div>\n        <div class=\"no\" :style=\"{height:result[1]*50+'px'}\">{{ result[1]!=0?result[1]:\" \" }}</div>\n      </div>\n      <div class=\"labels\">\n        <div class=\"yes-label\">Yes</div>\n        <div class=\"no-label\">No</div>\n      </div>\n    </div>\n    <canvas v-show=\"false\" ref=\"canvas\" id=\"canvas\" width=\"640\" height=\"480\"></canvas>\n    <img :src=\"capture\" id=\"image\" style=\"height:100vh;width:100vw\" v-show=\"false\" />\n  </div>\n</template>\n\n\n<script>\nimport * as posenet from \"@tensorflow-models/posenet\";\n\nexport default {\n  name: \"video-recognition\",\n  data() {\n    return {\n      result: [0, 0],\n      video: {},\n      canvas: {},\n      capture: null,\n      start: false,\n      loading: false,\n      interval: null,\n      question: \"\"\n    };\n  },\n  methods: {\n    toggle() {\n      if (this.start == false) {\n        this.loading = true;\n        this.start = true;\n        this.predict();\n      } else {\n        this.start = false;\n      }\n    },\n    predict() {\n      if (!this.start) return;\n      this.estimateMultiplePosesOnImage();\n    },\n    takePicture() {\n      this.canvas = this.$refs.canvas;\n      var context = this.canvas\n        .getContext(\"2d\")\n        .drawImage(this.video, 0, 0, 640, 480);\n      this.capture = this.canvas.toDataURL(\"image/png\");\n    },\n    // multi-pose\n    async estimateMultiplePosesOnImage() {\n      var t0 = performance.now();\n      this.takePicture();\n      let imageElement = document.getElementById(\"image\");\n      if (imageElement.src != \"\") {\n        const net = await posenet.load();\n        // estimate poses\n        const poses = await net.estimateMultiplePoses(imageElement, {\n          flipHorizontal: false,\n          maxDetections: 20,\n          scoreThreshold: 0.6,\n          nmsRadius: 2\n        });\n        if (!this.start) return;\n        this.numberOfVotes(poses);\n        this.loading = false;\n      }\n      var t1 = performance.now();\n      if (t1 - t0 > 2000) {\n        this.estimateMultiplePosesOnImage();\n      } else {\n        let self = this;\n        setTimeout(function() {\n          self.estimateMultiplePosesOnImage();\n        }, 2000);\n      }\n    },\n    // calculate number of votes\n    numberOfVotes(poses) {\n      let vote_yes = 0;\n      let vote_no = 0;\n      var i = 0;\n      while (poses[i]) {\n        if (poses[i].score > 0.2) {\n          if (\n            poses[i].keypoints[5].position.y >\n              poses[i].keypoints[9].position.y ||\n            poses[i].keypoints[6].position.y > poses[i].keypoints[10].position.y\n          ) {\n            vote_yes++;\n          } else {\n            vote_no++;\n          }\n        }\n        i++;\n      }\n      this.result = [vote_yes, vote_no];\n      console.log(this.result);\n    }\n  },\n  mounted() {\n    this.video = this.$refs.video;\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n      navigator.mediaDevices.getUserMedia({ video: true }).then(stream => {\n        this.video.srcObject = stream;\n        this.video.play();\n      });\n    }\n  }\n};\n</script>\n\n<style>\n#video {\n  width: 100vw;\n  height: 100vh;\n  background-color: #2196f3;\n  transform: scaleX(-1);\n  object-fit: cover;\n}\n.chart-labels {\n  position: fixed;\n  right: 6vw;\n  bottom: 2vh;\n}\n.chart {\n  /* position: fixed;\n  right: 10vw;\n  bottom: calc(10vh + 60px); */\n}\n.chart > * {\n  transition: height 1s;\n  vertical-align: bottom;\n  display: inline-block;\n  margin-left: 30px;\n  width: 60px;\n  border-radius: 10px;\n  text-align: center;\n  padding-top: 5px;\n  color: white;\n  font-size: 30px;\n  box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.2);\n}\n.yes {\n  background-color: #53c0a1;\n}\n\n.no {\n  background-color: #ef6d61;\n}\n\n.labels > * {\n  vertical-align: bottom;\n  display: inline-block;\n  margin-left: 30px;\n  width: 60px;\n  text-align: center;\n  color: white;\n  font-size: 30px;\n  text-shadow: 0px 2px 6px rgba(0, 0, 0, 0.5);\n}\n\ntextarea {\n  border: none;\n  overflow: auto;\n  outline: none;\n  box-shadow: none;\n\n  resize: none; /*remove the resize handle on the bottom right*/\n  color: white;\n  text-shadow: 0px 2px 6px rgba(0, 0, 0, 0.5);\n  font-size: 40px;\n  text-align: center;\n  width: 90%;\n  height: 300px;\n  margin: auto 5vw;\n}\ntextarea::placeholder {\n  color: white;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Video.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Video.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Video.vue?vue&type=template&id=5314e3e5&\"\nimport script from \"./Video.vue?vue&type=script&lang=js&\"\nexport * from \"./Video.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Video.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\ninstallComponents(component, {VBtn,VIcon})\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Video.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Video.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}