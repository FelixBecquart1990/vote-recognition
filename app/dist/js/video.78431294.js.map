{"version":3,"sources":["webpack:///./src/views/Video.vue?d652","webpack:///src/views/Video.vue","webpack:///./src/views/Video.vue?05c2","webpack:///./src/views/Video.vue","webpack:///./src/views/Video.vue?28cd"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","staticStyle","loading","on","$event","toggle","_v","_s","start","_m","directives","name","rawName","value","expression","capture","staticRenderFns","components","BarChart","data","result","video","canvas","interval","methods","predict","setInterval","self","clearInterval","estimateMultiplePosesOnImage","document","getElementById","takePicture","$refs","toDataURL","numberOfVotes","i","poses","score","vote_yes","vote_no","console","log","mounted","navigator","mediaDevices","getUserMedia","component","VBtn"],"mappings":"gHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,qBAAqB,CAACF,EAAG,MAAM,CAACE,YAAY,yBAAyB,CAACF,EAAG,QAAQ,CAACG,IAAI,QAAQC,MAAM,CAAC,GAAK,QAAQ,MAAQ,MAAM,OAAS,MAAM,SAAW,QAAQJ,EAAG,MAAM,CAACE,YAAY,wBAAwBG,YAAY,CAAC,aAAa,UAAU,CAACL,EAAG,QAAQ,CAACI,MAAM,CAAC,UAAY,GAAG,QAAU,GAAG,QAAUR,EAAIU,SAASC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOZ,EAAIa,YAAY,CAACb,EAAIc,GAAGd,EAAIe,GAAGf,EAAIgB,MAAM,OAAO,aAAa,GAAGhB,EAAIiB,GAAG,GAAGjB,EAAIiB,GAAG,GAAGb,EAAG,SAAS,CAACc,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,OAAM,EAAQC,WAAW,UAAUf,IAAI,SAASC,MAAM,CAAC,GAAK,SAAS,MAAQ,MAAM,OAAS,SAASJ,EAAG,MAAM,CAACc,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,OAAM,EAAQC,WAAW,UAAUb,YAAY,CAAC,OAAS,QAAQ,MAAQ,SAASD,MAAM,CAAC,IAAMR,EAAIuB,QAAQ,GAAK,cACr2BC,EAAkB,CAAC,WAAa,IAAIxB,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,sBAAsB,CAACF,EAAG,MAAM,CAACE,YAAY,SAAS,CAACF,EAAG,MAAM,CAACE,YAAY,OAAO,CAACN,EAAIc,GAAG,QAAQV,EAAG,MAAM,CAACE,YAAY,MAAM,CAACN,EAAIc,GAAG,YAAY,WAAa,IAAId,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,sBAAsB,CAACF,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,MAAM,CAACE,YAAY,aAAa,CAACN,EAAIc,GAAG,SAASV,EAAG,MAAM,CAACE,YAAY,YAAY,CAACN,EAAIc,GAAG,c,gDCsCnhB,GACEK,KAAM,oBACNM,WAAY,CACVC,SAAJ,QAEEC,KALF,WAMI,MAAO,CACLC,OAAQ,CAAC,EAAG,GACZC,MAAO,GACPC,OAAQ,GACRP,QAAS,KACTP,OAAO,EACPN,SAAS,EACTqB,SAAU,OAGdC,QAAS,CACPnB,OADJ,WAEM,GAAkB,GAAdZ,KAAKe,MAAgB,CACvBf,KAAKS,SAAU,EACfT,KAAKe,OAAQ,EACbf,KAAKgC,UACL,IAAR,OACQhC,KAAK8B,SAAWG,YAAYC,EAAKF,UAAW,UAE5ChC,KAAKe,OAAQ,EACboB,cAAcnC,KAAK8B,WAGvBE,QAbJ,WAcWhC,KAAKe,OACVf,KAAKoC,6BAA6BC,SAASC,eAAe,WAE5DC,YAjBJ,WAkBMvC,KAAK6B,OAAS7B,KAAKwC,MAAMX,OACX7B,KAAK6B,OACzB,iBACA,kCACM7B,KAAKsB,QAAUtB,KAAK6B,OAAOY,UAAU,cAGvC,6BAzBJ,SAyBA,mLAKA,SALA,cAKA,EALA,OAOA,gBAPA,SAUA,2BACA,kBACA,iBACA,kBACA,cAdA,UAUA,EAVA,OAgBA,QAhBA,iDAiBA,mBACA,aAEA,YApBA,+CAuBIC,cAhDJ,SAgDA,GACM,IAAN,IACA,IACUC,EAAI,EACR,MAAOC,EAAMD,GACPC,EAAMD,GAAGE,MAAQ,KAE7B,6BACA,8BACA,2DAEYC,IAEAC,KAGJJ,IAEF3C,KAAK2B,OAAS,CAACmB,EAAUC,GACzBC,QAAQC,IAAIjD,KAAK2B,UAGrBuB,QAtFF,WAsFA,WACIlD,KAAK4B,MAAQ5B,KAAKwC,MAAMZ,MACpBuB,UAAUC,cAAgBD,UAAUC,aAAaC,cACnDF,UAAUC,aAAaC,aAAa,CAA1C,6BACQ,EAAR,kBACQ,EAAR,kBClI0Y,I,yDCQtYC,EAAY,eACd,EACAxD,EACAyB,GACA,EACA,KACA,KACA,MAIa,aAAA+B,EAAiB,QAKhC,IAAkBA,EAAW,CAACC,OAAA,Q,oCCxB9B,yBAAugB,EAAG,G","file":"js/video.78431294.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"video-recognition\"},[_c('div',{staticClass:\"d-flex justify-center\"},[_c('video',{ref:\"video\",attrs:{\"id\":\"video\",\"width\":\"640\",\"height\":\"480\",\"autoplay\":\"\"}})]),_c('div',{staticClass:\"d-flex justify-center\",staticStyle:{\"margin-top\":\"-50px\"}},[_c('v-btn',{attrs:{\"depressed\":\"\",\"rounded\":\"\",\"loading\":_vm.loading},on:{\"click\":function($event){return _vm.toggle()}}},[_vm._v(_vm._s(_vm.start?'Stop':'Start'))])],1),_vm._m(0),_vm._m(1),_c('canvas',{directives:[{name:\"show\",rawName:\"v-show\",value:(false),expression:\"false\"}],ref:\"canvas\",attrs:{\"id\":\"canvas\",\"width\":\"640\",\"height\":\"480\"}}),_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(false),expression:\"false\"}],staticStyle:{\"height\":\"100vh\",\"width\":\"100vw\"},attrs:{\"src\":_vm.capture,\"id\":\"image\"}})])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"d-flex justify-end\"},[_c('div',{staticClass:\"chart\"},[_c('div',{staticClass:\"yes\"},[_vm._v(\"10\")]),_c('div',{staticClass:\"no\"},[_vm._v(\"2\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"d-flex justify-end\"},[_c('div',{staticClass:\"labels\"},[_c('div',{staticClass:\"yes-label\"},[_vm._v(\"Yes\")]),_c('div',{staticClass:\"no-label\"},[_vm._v(\"No\")])])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"video-recognition\">\n    <div class=\"d-flex justify-center\">\n      <video ref=\"video\" id=\"video\" width=\"640\" height=\"480\" autoplay></video>\n    </div>\n    <div class=\"d-flex justify-center\" style=\"margin-top:-50px;\">\n      <v-btn depressed rounded @click=\"toggle()\" :loading=\"loading\">{{start?'Stop':'Start'}}</v-btn>\n    </div>\n    <div class=\"d-flex justify-end\">\n      <div class=\"chart\">\n        <div class=\"yes\">10</div>\n        <div class=\"no\">2</div>\n      </div>\n    </div>\n    <div class=\"d-flex justify-end\">\n      <div class=\"labels\">\n        <div class=\"yes-label\">Yes</div>\n        <div class=\"no-label\">No</div>\n      </div>\n    </div>\n    <!-- <div class=\"d-flex justify-center mt-5\">\n      <BarChart\n        style=\"width:100px; height:100px\"\n        msg=\"Welcome to Your Vue.js App\"\n        :result=\"result\"\n      />\n    </div>-->\n    <canvas v-show=\"false\" ref=\"canvas\" id=\"canvas\" width=\"640\" height=\"480\"></canvas>\n    <img :src=\"capture\" id=\"image\" style=\"height:100vh;width:100vw\" v-show=\"false\" />\n  </div>\n</template>\n\n\n<script>\n// @ is an alias to /src\nimport BarChart from \"@/components/BarChart.vue\";\n\nimport * as posenet from \"@tensorflow-models/posenet\";\n\nexport default {\n  name: \"video-recognition\",\n  components: {\n    BarChart\n  },\n  data() {\n    return {\n      result: [0, 1],\n      video: {},\n      canvas: {},\n      capture: null,\n      start: false,\n      loading: false,\n      interval: null\n    };\n  },\n  methods: {\n    toggle() {\n      if (this.start == false) {\n        this.loading = true;\n        this.start = true;\n        this.predict();\n        let self = this;\n        this.interval = setInterval(self.predict(), 2000);\n      } else {\n        this.start = false;\n        clearInterval(this.interval);\n      }\n    },\n    predict() {\n      if (!this.start) return;\n      this.estimateMultiplePosesOnImage(document.getElementById(\"image\"));\n    },\n    takePicture() {\n      this.canvas = this.$refs.canvas;\n      var context = this.canvas\n        .getContext(\"2d\")\n        .drawImage(this.video, 0, 0, 640, 480);\n      this.capture = this.canvas.toDataURL(\"image/png\");\n    },\n    // multi-pose\n    async estimateMultiplePosesOnImage(imageElement) {\n      // let self = this\n      // let timeoutRunning = true\n      // let timeout = setTimeout(self.predict(), 1000);\n\n      const net = await posenet.load();\n\n      this.takePicture();\n\n      // estimate poses\n      const poses = await net.estimateMultiplePoses(imageElement, {\n        flipHorizontal: false,\n        maxDetections: 20,\n        scoreThreshold: 0.6,\n        nmsRadius: 2\n      });\n      if (!this.start) return;\n      this.numberOfVotes(poses);\n      this.loading = false;\n      // next estimation\n      this.predict();\n    },\n    // calculate number of votes\n    numberOfVotes(poses) {\n      let vote_yes = 0;\n      let vote_no = 0;\n      var i = 0;\n      while (poses[i]) {\n        if (poses[i].score > 0.2) {\n          if (\n            poses[i].keypoints[5].position.y >\n              poses[i].keypoints[9].position.y ||\n            poses[i].keypoints[6].position.y > poses[i].keypoints[10].position.y\n          ) {\n            vote_yes++;\n          } else {\n            vote_no++;\n          }\n        }\n        i++;\n      }\n      this.result = [vote_yes, vote_no];\n      console.log(this.result);\n    }\n  },\n  mounted() {\n    this.video = this.$refs.video;\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n      navigator.mediaDevices.getUserMedia({ video: true }).then(stream => {\n        this.video.srcObject = stream;\n        this.video.play();\n      });\n    }\n  }\n};\n</script>\n\n<style>\n#video {\n  width: 100vw;\n  height: calc(100vh - 56px);\n  background-color: #2196f3;\n  transform: scaleX(-1);\n  object-fit: cover;\n}\n.chart {\n  position: fixed;\n  right: 10vw;\n  bottom: calc(10vh + 60px);\n}\n.chart > * {\n  vertical-align: bottom;\n  display: inline-block;\n  margin-left: 30px;\n  width: 80px;\n  border-radius: 10px;\n  text-align: center;\n  padding-top: 5px;\n  color: white;\n  font-size: 30px;\n  box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.2);\n}\n.yes {\n  background-color: #53c0a1;\n  height: 200px;\n}\n\n.no {\n  background-color: #ef6d61;\n  height: 50px;\n}\n.labels {\n  position: fixed;\n  right: 10vw;\n  bottom: 10vh;\n}\n.labels > * {\n  vertical-align: bottom;\n  display: inline-block;\n  margin-left: 30px;\n  width: 80px;\n  text-align: center;\n  color: white;\n  font-size: 30px;\n  text-shadow: 0px 2px 6px rgba(0, 0, 0, 0.5);\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Video.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Video.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Video.vue?vue&type=template&id=512fc29d&\"\nimport script from \"./Video.vue?vue&type=script&lang=js&\"\nexport * from \"./Video.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Video.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\ninstallComponents(component, {VBtn})\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Video.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Video.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}