(function(t){function e(e){for(var a,r,s=e[0],c=e[1],l=e[2],d=0,p=[];d<s.length;d++)r=s[d],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&p.push(o[r][0]),o[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(p.length)p.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(a=!1)}a&&(i.splice(e--,1),t=r(r.s=n[0]))}return t}var a={},o={app:0},i=[];function r(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=a,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var a=n("8a23"),o=n.n(a);o.a},1:function(t,e){},1543:function(t,e,n){"use strict";n.r(e),n.d(e,"db",(function(){return r})),n.d(e,"auth",(function(){return s})),n.d(e,"currentUser",(function(){return c})),n.d(e,"graphsCollection",(function(){return l}));var a=n("59ca"),o=n.n(a),i=(n("e71f"),n("ea7b"),{apiKey:"AIzaSyDHMD54UNFlh6euKdSm-cXHhrxYwVzQ8XU",authDomain:"vote-recognition.firebaseapp.com",databaseURL:"https://vote-recognition.firebaseio.com",projectId:"vote-recognition",storageBucket:"vote-recognition.appspot.com",messagingSenderId:"222754152177",appId:"1:222754152177:web:6e012c383dcec081d95350",measurementId:"G-57F98JFM4J"});o.a.initializeApp(i);var r=o.a.firestore(),s=o.a.auth(),c=s.currentUser,l=r.collection("graphs")},2:function(t,e){},3:function(t,e){},"545c":function(t,e,n){"use strict";var a=n("8314"),o=n.n(a);o.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-content",[n("router-view")],1),n("snackbar"),n("informationDialog")],1)},i=[],r=(n("4160"),n("159b"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-snackbar",{attrs:{color:t.snackbar.color,timeout:t.snackbar.timeout,top:""},model:{value:t.snackbar.active,callback:function(e){t.$set(t.snackbar,"active",e)},expression:"snackbar.active"}},[t._v(" "+t._s(t.snackbar.text)+" ")])}),s=[],c=(n("a4d3"),n("4de4"),n("e439"),n("dbb4"),n("b64b"),n("ade3")),l=n("2f62");function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var p={computed:d({},Object(l["b"])(["snackbar"]))},f=p,v=n("2877"),m=n("6544"),h=n.n(m),g=n("2db4"),b=Object(v["a"])(f,r,s,!1,null,"f629ef72",null),y=b.exports;h()(b,{VSnackbar:g["a"]});var x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-center"},[n("v-dialog",{attrs:{width:"500"},model:{value:t.informationDialog,callback:function(e){t.informationDialog=e},expression:"informationDialog"}},[n("v-card",{on:{click:function(e){t.informationDialog=!1}}},[n("v-card-title",{staticClass:"headline white--text success",attrs:{"primary-title":""}},[t._v("Information")]),n("v-card-title",{staticClass:"grey--text"},[n("v-icon",{staticClass:"grey--text",attrs:{color:"black",left:""}},[t._v("mdi-hand")]),t._v("How to vote ")],1),n("v-card-text",{staticClass:"pb-5 grey--text"},[t._v("Raise one of your wrists above your shoulders")]),n("v-card-title",{staticClass:"grey--text"},[n("v-icon",{staticClass:"grey--text",attrs:{color:"black",left:""}},[t._v("mdi-content-save")]),t._v("How to save the result ")],1),n("v-card-text",{staticClass:"pb-5 grey--text"},[t._v("Raise your two elbows above your shoulders.")]),n("v-card-title",{staticClass:"grey--text"},[n("v-icon",{staticClass:"grey--text",attrs:{color:"black",left:""}},[t._v("mdi-format-list-text")]),t._v("How to see saved results ")],1),n("v-card-text",{staticClass:"pb-5 grey--text"},[t._v("Put your two wrists further to your right shoulder. To close this navigation drawer, put your two wrists further to your left shoulder.")])],1)],1)],1)},w=[],k={computed:{informationDialog:{get:function(){return this.$store.state.informationDialog},set:function(t){return this.$store.commit("setInformationDialog",t)}}}},O=k,D=n("b0af"),j=n("99d9"),_=n("169a"),S=n("132d"),C=Object(v["a"])(O,x,w,!1,null,"6ec111d8",null),P=C.exports;h()(C,{VCard:D["a"],VCardText:j["a"],VCardTitle:j["b"],VDialog:_["a"],VIcon:S["a"]});var $=n("1543"),R={name:"App",components:{Snackbar:y,InformationDialog:P},data:function(){return{}},mounted:function(){var t=this;$.auth.signInAnonymously().then((function(t){console.log(t)})).catch((function(t){console.log(t);t.code,t.message})),$.graphsCollection.orderBy("createdOn","desc").limit(10).onSnapshot((function(e){var n=[];e.forEach((function(t){n.push(Object.assign({uid:t.id},t.data()))})),t.$store.commit("setResults",n)}),(function(t){console.log(t)}))}},I=R,M=(n("034f"),n("7496")),N=n("a75b"),V=Object(v["a"])(I,o,i,!1,null,null,null),q=V.exports;h()(V,{VApp:M["a"],VContent:N["a"]});var z=n("8c4f"),T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"video-recognition"},[n("NavigationDrawer"),n("v-btn",{staticStyle:{position:"fixed","z-index":"2",left:"5px",top:"5px"},attrs:{fab:"",depressed:"",color:"transparent",small:"",dark:"",loading:t.loadingModel},on:{click:function(e){return t.toggle()}}},[n("v-icon",{staticStyle:{"text-shadow":"0px 2px 6px rgba(0, 0, 0, 0.5)"},attrs:{color:"white"}},[t._v(t._s(t.start?"mdi-stop":"mdi-play"))])],1),n("v-btn",{staticStyle:{position:"fixed","z-index":"2",left:"45px",top:"5px"},attrs:{fab:"",depressed:"",color:"transparent",small:"",dark:"",loading:t.loadingSaveResult},on:{click:function(e){return t.save()}}},[n("v-icon",{staticStyle:{"text-shadow":"0px 2px 6px rgba(0, 0, 0, 0.5)"},attrs:{color:"white"}},[t._v("mdi-content-save")])],1),n("v-btn",{staticStyle:{position:"fixed","z-index":"2",left:"95px",top:"5px"},attrs:{fab:"",depressed:"",color:"transparent",small:"",dark:""},on:{click:function(e){return t.openNavigationDrawer()}}},[n("v-icon",{staticStyle:{"text-shadow":"0px 2px 6px rgba(0, 0, 0, 0.5)"},attrs:{color:"white"}},[t._v("mdi-poll-box")])],1),n("v-btn",{staticStyle:{position:"fixed","z-index":"2",left:"145px",top:"5px"},attrs:{fab:"",depressed:"",color:"transparent",small:"",dark:""},on:{click:function(e){return t.openInformationDialog()}}},[n("v-icon",{staticStyle:{"text-shadow":"0px 2px 6px rgba(0, 0, 0, 0.5)"},attrs:{color:"white"}},[t._v("mdi-information")])],1),n("div",{staticStyle:{position:"fixed","z-index":"1",top:"8vh",width:"100%"}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.question,expression:"question"}],attrs:{placeholder:"Write your question here..."},domProps:{value:t.question,innerHTML:t._s(t.question)},on:{input:function(e){e.target.composing||(t.question=e.target.value)}}})]),n("div",{staticClass:"d-flex justify-center"},[n("video",{ref:"video",attrs:{id:"video",width:"640",height:"480",autoplay:""}})]),n("canvas",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"canvas",attrs:{id:"canvas",width:"640",height:"480"}}),n("img",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"image",staticStyle:{height:"100vh",width:"100vw"},attrs:{src:t.capture,id:"image"}}),n("Chart",{staticClass:"chart-fixed",attrs:{result:t.result}})],1)},E=[],F=(n("96cf"),n("1da1")),U=n("8726"),H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-navigation-drawer",{staticClass:"drawer",attrs:{absolute:"",temporary:"",dark:""},model:{value:t.navigationDrawer,callback:function(e){t.navigationDrawer=e},expression:"navigationDrawer"}},[n("v-btn",{staticClass:"ma-1",staticStyle:{position:"fixed","z-index":"2",left:"5px",top:"5px"},attrs:{fab:"",depressed:"",color:"transparent",small:"",dark:""},on:{click:function(e){t.navigationDrawer=!1}}},[n("v-icon",{staticStyle:{"text-shadow":"0px 2px 6px rgba(0, 0, 0, 0.5)"},attrs:{color:"white"}},[t._v("mdi-arrow-left")])],1),t._l(t.results,(function(e,a){return n("div",{key:a},[n("div",{staticClass:"d-flex justify-center mt-4"},[n("Chart",{attrs:{result:e.result}})],1),n("div",{staticClass:"d-flex justify-center mt-3 mx-5"},[n("h2",{staticStyle:{color:"white","font-size":"30px","text-align":"center"}},[t._v(t._s(e.question))])]),n("div",{staticClass:"d-flex justify-center mt-3 mx-5"},[n("v-btn",{staticClass:"ma-1",attrs:{fab:"",depressed:"",color:"transparent",small:"",dark:""},on:{click:function(n){return t.deleteResult(e)}}},[n("v-icon",{staticStyle:{"text-shadow":"0px 2px 6px rgba(0, 0, 0, 0.5)"},attrs:{color:"red"}},[t._v("mdi-delete")])],1)],1),n("v-divider",{staticClass:"ma-5"})],1)}))],2)},A=[],B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chart-labels"},[n("div",{staticClass:"chart"},[n("div",{staticClass:"yes",style:{height:50*t.result[0]+"px"}},[t._v(" "+t._s(0!=t.result[0]?t.result[0]:" ")+" ")]),n("div",{staticClass:"no",style:{height:50*t.result[1]+"px"}},[t._v(" "+t._s(0!=t.result[1]?t.result[1]:" ")+" ")])]),t._m(0)])},J=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"labels"},[n("div",{staticClass:"yes-label"},[t._v("Yes")]),n("div",{staticClass:"no-label"},[t._v("No")])])}],L={props:["result"]},Y=L,W=(n("d457"),Object(v["a"])(Y,B,J,!1,null,"70ac8659",null)),K=W.exports;function X(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function G(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?X(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Q=n("1543"),Z={components:{Chart:K},computed:G({},Object(l["b"])(["results"]),{navigationDrawer:{get:function(){return this.$store.state.navigationDrawer},set:function(t){return this.$store.commit("setNavigationDrawer",t)}}}),methods:{deleteResult:function(t){var e=this;Q.graphsCollection.doc(t.uid).delete().then((function(){e.$store.commit("setSnackbar",{color:"success",timeout:3e3,text:"This result has been deleted"})})).catch((function(t){console.log(t)}))}}},tt=Z,et=(n("545c"),n("8336")),nt=n("ce7e"),at=n("f774"),ot=Object(v["a"])(tt,H,A,!1,null,null,null),it=ot.exports;h()(ot,{VBtn:et["a"],VDivider:nt["a"],VIcon:S["a"],VNavigationDrawer:at["a"]});var rt=n("1543"),st={name:"video-recognition",components:{NavigationDrawer:it,Chart:K},data:function(){return{frequency:500,result:[0,0],video:{},canvas:{},capture:null,start:!1,loadingModel:!0,loadingSaveResult:!1,interval:null,question:"",modelLoaded:!1,net:null}},methods:{openInformationDialog:function(){this.$store.commit("setInformationDialog",!0)},openNavigationDrawer:function(){this.$store.commit("setNavigationDrawer",!0)},save:function(){var t=this;if(1!=this.loadingSaveResult)if(""!=this.question){this.loadingSaveResult=!0;var e=this;rt.graphsCollection.add({result:this.result,createdOn:new Date,question:this.question}).then((function(n){setTimeout((function(){e.loadingSaveResult=!1}),3e3),t.$store.commit("setSnackbar",{color:"success",timeout:3e3,text:"Result have been saved"})})).catch((function(e){t.loadingSaveResult=!1,console.log(e)}))}else this.$store.commit("setSnackbar",{color:"info",timeout:3e3,text:"Write a question before saving..."})},toggle:function(){0==this.start?(this.start=!0,this.predict()):this.start=!1},predict:function(){this.$store.commit("setSnackbar",{color:"success",timeout:3e3,text:"Now raise your hand!"}),this.estimateMultiplePosesOnImage()},takePicture:function(){this.canvas=this.$refs.canvas;this.canvas.getContext("2d").drawImage(this.video,0,0,640,480);this.capture=this.canvas.toDataURL("image/png")},estimateMultiplePosesOnImage:function(){var t=this;return Object(F["a"])(regeneratorRuntime.mark((function e(){var n,a,o,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=performance.now(),t.takePicture(),a=t.$refs.image,""==a.src){e.next=10;break}return e.next=6,t.net.estimateMultiplePoses(a,{flipHorizontal:!1,maxDetections:20,scoreThreshold:.6,nmsRadius:2});case 6:if(o=e.sent,t.start){e.next=9;break}return e.abrupt("return");case 9:t.analyzePoses(o);case 10:i=performance.now(),i-n>t.frequency?t.estimateMultiplePosesOnImage():(r=t,setTimeout((function(){r.estimateMultiplePosesOnImage()}),t.frequency-(i-n)));case 12:case"end":return e.stop()}}),e)})))()},analyzePoses:function(t){var e=0,n=0,a=0;while(t[a])t[a].score>.2&&(this.isVotingYes(t[a])?e++:n++,this.isSaving(t[a])&&this.save(),this.isTogglingNavigationDrawer(t[a])),a++;this.result=[e,n]},isVotingYes:function(t){return t.keypoints[5].position.y>t.keypoints[9].position.y||t.keypoints[6].position.y>t.keypoints[10].position.y},isSaving:function(t){if(!this.loadingSaveResult)return t.keypoints[7].position.y<t.keypoints[5].position.y&&t.keypoints[8].position.y<t.keypoints[6].position.y},isTogglingNavigationDrawer:function(t){t.keypoints[9].position.x<t.keypoints[6].position.x&&t.keypoints[10].position.x<t.keypoints[6].position.x&&this.$store.commit("setNavigationDrawer",!0),t.keypoints[9].position.x>t.keypoints[5].position.x&&t.keypoints[10].position.x>t.keypoints[5].position.x&&this.$store.commit("setNavigationDrawer",!1)}},beforeMount:function(){var t=this;return Object(F["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$store.commit("setSnackbar",{color:"info",timeout:3e3,text:"Wait few seconds..."}),e.next=3,U["a"]();case 3:t.net=e.sent,t.$store.commit("setSnackbar",{color:"success",timeout:3e3,text:"Ready to run!"}),t.loadingModel=!1;case 6:case"end":return e.stop()}}),e)})))()},mounted:function(){var t=this;this.video=this.$refs.video,navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then((function(e){t.video.srcObject=e,t.video.play()}))}},ct=st,lt=(n("8a44"),Object(v["a"])(ct,T,E,!1,null,null,null)),ut=lt.exports;h()(lt,{VBtn:et["a"],VIcon:S["a"]}),a["a"].use(z["a"]);var dt=[{path:"/",name:"video",component:ut}],pt=new z["a"]({mode:"history",base:"/",routes:dt}),ft=pt;a["a"].use(l["a"]);var vt=new l["a"].Store({state:{snackbar:{active:!1,color:"",mode:"",timeout:0,text:""},navigationDrawer:!1,results:[],informationDialog:!1},mutations:{setInformationDialog:function(t,e){t.informationDialog=e},setSnackbar:function(t,e){t.snackbar=Object.assign({},e,{active:!0})},setNavigationDrawer:function(t,e){t.navigationDrawer=e},setResults:function(t,e){t.results=e}},actions:{},modules:{}}),mt=n("f309");a["a"].use(mt["a"]);var ht,gt=new mt["a"]({theme:{themes:{light:{primary:"#2196F3",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#53c0a1",warning:"#FFC107"}}}}),bt=n("1543");a["a"].config.productionTip=!1,bt.auth.onAuthStateChanged((function(t){ht||(ht=new a["a"]({el:"#app",router:ft,store:vt,vuetify:gt,render:function(t){return t(q)}}))}))},8314:function(t,e,n){},"8a23":function(t,e,n){},"8a44":function(t,e,n){"use strict";var a=n("fd34"),o=n.n(a);o.a},d457:function(t,e,n){"use strict";var a=n("ec1e"),o=n.n(a);o.a},ec1e:function(t,e,n){},fd34:function(t,e,n){}});
//# sourceMappingURL=app.63eca379.js.map